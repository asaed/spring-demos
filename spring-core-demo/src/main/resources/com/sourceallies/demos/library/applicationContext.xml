<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <import resource="./applicationContext-central.xml"/>
    <import resource="./applicationContext-sau.xml"/>

    <bean id="bookRepositories"
          class="org.springframework.beans.factory.config.ListFactoryBean"
    >
        <property name="sourceList">
            <list>
                <ref bean="sauBookRepository"/>
                <ref bean="centralBookRepository"/>
            </list>
        </property>
    </bean>

    <bean id="aggregatingBookRepository"
          class="com.sourceallies.demos.library.repositories.aggregation.AggregatingBookRepository"
    >
        <constructor-arg name="bookRepositories" ref="bookRepositories"/>
    </bean>

    <bean id="aggregatingAuthorRepository"
          class="com.sourceallies.demos.library.repositories.aggregation.AggregatingAuthorRepository"
    >
        <constructor-arg name="aggregatingBookRepository" ref="aggregatingBookRepository"/>
    </bean>
</beans>